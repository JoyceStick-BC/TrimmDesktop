<!DOCTYPE html>
<html>
   <head>
      <meta charset = "UTF-8">
      <title>Home</title>
   </head>

   <body>
      <h1>Trimm Desktop</h1>
      <button type="button" name="button" id="trimm_install">Trimm Pull</button>
      <p>Select project directory</p>
      <p>Current Directory: </p>
      <form action="index.html" id="form">
          <button type="button" id="choose-file">Select File</button>
          <p id="file-input"></p>
      </form>
   </body>
   <script type="text/javascript">
       var textEncoding = require('text-encoding');
       var TextDecoder = textEncoding.TextDecoder;
       let $ = require('jquery')
       $('#trimm_install').on('click', function() {
           if ($('#file-input').text() == "") {
               $('#file-input').text("Please select a file!");
               return;
           }
           var spawn = require('child_process').spawn;
           var py = spawn('python', ['./Trimm-CLI-master/trimm.py', 'pull', $('#file-input').text()])
           py.stdout.on('data', function(data){
               var response = new TextDecoder("utf-8").decode(data);
               console.log(response);
           });
           py.stderr.on('data', function(data) {
                console.error(data.toString());
            });
       });

       $('#choose-file').on('click', function() {
           const {dialog} = require('electron').remote;
           var filepath = dialog.showOpenDialog({properties: ['openFile', 'openDirectory', 'multiSelections']});
           $('#file-input').text(filepath[0] + "/");
       })
       </script>
</html>
